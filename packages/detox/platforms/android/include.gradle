repositories {
  maven { url = project.file('../../../node_modules/detox/Detox-android') }
}

dependencies {
  androidTestImplementation('com.wix:detox:+') { transitive = true }
  androidTestImplementation 'com.squareup.okhttp3:okhttp:+'
}

android {
  def testBase = project.file('../../../node_modules/@nativescript/detox/platforms/android/androidTest')

  defaultConfig {
    testBuildType System.getProperty('testBuildType', 'debug')
    testInstrumentationRunner 'androidx.test.runner.AndroidJUnitRunner'
  }

  sourceSets {
    androidTest {
      java.srcDirs += ["${testBase}/java"]
      manifest.srcFile "${testBase}/AndroidManifest.xml"
    }
  }

  buildTypes {
    debug {
      minifyEnabled false
      shrinkResources false
    }
  }
}
